# Last Night API Server

A production-ready Golang API server featuring:

- Golang with structured layers: repository, service, handlers, middleware
- OpenAPI v3 via `swag` for auto-generated docs
- Database migrations with `goose`
- Type-safe SQL with `sqlc`
- Clean architecture, DI-friendly boundaries, and testable components

## Tech Stack

- Language: Go
- HTTP: `echo`
- Migrations: `goose`
- SQL codegen: `sqlc`
- Documentation: `swag` (OpenAPI)
- Database: Postgres
- Config: environment variables (12-factor style)
- Lint/Format: `gofmt`

## Architecture

- `repo` layer: database access with `sqlc`-generated code and small adapters
- `service` layer: business logic, validation, orchestration
- `handlers` layer: HTTP endpoints mapping requests/responses to services
- `middleware`: cross-cutting concerns (auth, logging, recovery, CORS, request ID)
- `docs`: autogenerated OpenAPI swagger
- `migrations`: DB schema changes managed via `goose`

## Others

Seed tags
```sql
INSERT INTO teams(name,domain) VALUES ('Google', 'gmail.com');

INSERT INTO tag_keys(team_id, name, data_type) VALUES
(1, 'professor', 'string'),
(1, 'course', 'string'),
(1, 'semester', 'string');

INSERT INTO tag_values(key_id, value) VALUES
(1, 'geetha'),
(1, 'ramakalyan'),
(2, 'circuit theory'),
(3, '1'),
(3, '2');
```
